version: 1

common:
  resourcesPath: ./components
  logLevel: info
  appLogDestination: file
  daprdLogDestination: file
  enableAPILogging: false
  env:
    LOCAL_VOICE_DOWNLOAD_FOLDER: "./.work/voice"
    DAPR_AGENTS_STATE_DIR: "./.dapr_state"

apps:
  - appID: authenticator
    appDirPath: ./
    appPort: 5000
    placementHostAddress: ""
    command: ["python", "-m", "services.ui.authenticator"]

  - appID: workflows
    appDirPath: ./
    appPort: 5001
    placementHostAddress: ""
    env:
      DEBUGPY_ENABLE: 0
      PYDEVD_DISABLE_FILE_VALIDATION: 1
      ONEDRIVE_VOICE_POLL_INTERVAL: 60
    command: ["python", "-m", "services.workflow.worker"]

  - appID: worker-voice2action
    appDirPath: ./
    appPort: 5002
    appProtocol: grpc
    env:
      DEBUGPY_ENABLE: 0
      PYDEVD_DISABLE_FILE_VALIDATION: 1
    command: ["python", "-m", "services.workflow.worker_voice2action"]

  - appID: orchestrator-intent
    appDirPath: ./
    appPort: 5100
    env:
      DEBUGPY_ENABLE: 0
      PYDEVD_DISABLE_FILE_VALIDATION: 1
    command: ["python", "-m", "services.intent_orchestrator.orchestrator"]

  - appID: agent-taskplanner
    appDirPath: ./
    appPort: 5101
    env:
      DEBUGPY_ENABLE: 0
      PYDEVD_DISABLE_FILE_VALIDATION: 1
    command: ["python", "-m", "services.intent_orchestrator.agent_tasker"]

  - appID: agent-office-automation
    appDirPath: ./
    appPort: 5102
    env:
      DEBUGPY_ENABLE: 0
      PYDEVD_DISABLE_FILE_VALIDATION: 1
    command: ["python", "-m", "services.intent_orchestrator.agent_office_automation"]

  - appID: monitor
    appDirPath: ./
    appPort: 5199
    appProtocol: grpc
    appLogDestination: console
    logLevel: info
    placementHostAddress: ""
    env:
      DEBUGPY_ENABLE: 0
      PYDEVD_DISABLE_FILE_VALIDATION: 1
    command: ["python", "-m", "services.ui.monitor"]

  # - appID: web-monitor
  #   appDirPath: ./
  #   appPort: 5200
  #   placementHostAddress: ""
  #   env:
  #     DAPR_PUBSUB_NAME: pubsub
  #     DAPR_BROADCAST_TOPIC: beacon_channel
  #   command: ["node", "services/ui/web_monitor/server.js"]
